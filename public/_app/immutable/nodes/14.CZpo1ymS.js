var u=Object.defineProperty;var d=(l,t,h)=>t in l?u(l,t,{enumerable:!0,configurable:!0,writable:!0,value:h}):l[t]=h;var o=(l,t,h)=>(d(l,typeof t!="symbol"?t+"":t,h),h);import{s as m,n as g,o as v}from"../chunks/scheduler.BDXRdsok.js";import{S as x,i as C,e as w,c as _,p as b,f,j as I,d as A}from"../chunks/index.D0yXBZN2.js";function M(l){let t,h="This page requires Javascript to render. Sorry.";return{c(){t=w("canvas"),t.textContent=h,this.h()},l(r){t=_(r,"CANVAS",{id:!0,class:!0,"data-svelte-h":!0}),b(t)!=="svelte-tj4okx"&&(t.textContent=h),this.h()},h(){f(t,"id","excite-canvas"),f(t,"class","svelte-jii718")},m(r,p){I(r,t,p)},p:g,i:g,o:g,d(r){r&&A(t)}}}function y(l){return v(()=>{class t{constructor(i,s){o(this,"palette");o(this,"cells");o(this,"canvas");o(this,"ctx");o(this,"width");o(this,"height");this.palette=[];for(let e of i){let n={r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16),a:255};console.log(e.substring(1,2)),console.log(n),this.palette.push(n)}this.canvas=s,this.ctx=this.canvas.getContext("2d"),this.cells=[];for(let e=0;e<50;e++){this.cells.push([]);for(let n=0;n<50;n++){let a={state:Math.random()>.99?this.palette.length-1:0};a.static&&(a.state=0),this.cells[e].push(a)}}this.height=this.cells.length,this.width=this.cells[0].length,this.canvas.width=this.width,this.canvas.height=this.height,this.render()}getCellWrapping(i,s){if(this.cells)return this.cells.at(s%this.cells.length).at(i%this.cells[0].length)}step(){this.cells=this.cells.map((i,s)=>i.map((e,n)=>{if(e.static)return e;let a={state:e.state};if(e.state>0&&(a.state=e.state-1,e.state>2))return a;for(let c of[-1,1])if(this.getCellWrapping(n+c,s).state==this.palette.length-1)return a.state=this.palette.length-1,a;for(let c of[-1,1])if(this.getCellWrapping(n,s+c).state==this.palette.length-1)return a.state=this.palette.length-1,a;return Math.trunc(Math.random()*1e4)==69&&(a.state=this.palette.length-1),a}))}render(){let i=new Uint8ClampedArray(4*this.width*this.height);this.cells.flatMap((s,e)=>s.flatMap((n,a)=>(console.log(n.state),this.palette[n.state]))).forEach((s,e)=>{i[e*4]=s.r,i[e*4+1]=s.g,i[e*4+2]=s.b,i[e*4+3]=s.a}),this.ctx.putImageData(new ImageData(i,this.width,this.height),0,0)}}const h=["#030516","#2A4347","#218278","#18C0A9","#0FFFDB"];let r=new t(h,document.getElementById("excite-canvas"));setInterval(()=>{r.step(),r.render()},1/24)}),[]}class D extends x{constructor(t){super(),C(this,t,y,M,m,{})}}export{D as component};
