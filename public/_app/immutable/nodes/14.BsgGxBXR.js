var u=Object.defineProperty;var d=(h,t,n)=>t in h?u(h,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[t]=n;var c=(h,t,n)=>(d(h,typeof t!="symbol"?t+"":t,n),n);import{s as F,n as g,o as m}from"../chunks/scheduler.BDXRdsok.js";import{S as v,i as x,e as C,c as A,g as w,k as f,f as B,d as _}from"../chunks/index.CGq9qK4R.js";function I(h){let t,n="This page requires Javascript to render. Sorry.";return{c(){t=C("canvas"),t.textContent=n,this.h()},l(l){t=A(l,"CANVAS",{id:!0,class:!0,"data-svelte-h":!0}),w(t)!=="svelte-tj4okx"&&(t.textContent=n),this.h()},h(){f(t,"id","excite-canvas"),f(t,"class","svelte-1xcmdn5")},m(l,o){B(l,t,o)},p:g,i:g,o:g,d(l){l&&_(t)}}}function b(h){return m(()=>{class t{constructor(a,e){c(this,"palette");c(this,"cells");c(this,"canvas");c(this,"ctx");c(this,"width");c(this,"height");this.palette=[],this.setPalette(a),this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.cells=[];for(let s=0;s<180;s++){this.cells.push([]);for(let r=0;r<320;r++){let i={state:Math.random()>.99?this.palette.length-1:0};i.static&&(i.state=0),this.cells[s].push(i)}}this.height=this.cells.length,this.width=this.cells[0].length,this.canvas.width=this.width,this.canvas.height=this.height,this.render()}setPalette(a){this.palette=[];for(let e of a){let s={r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16),a:255};this.palette.push(s)}}getCellWrapping(a,e){if(this.cells)return this.cells.at(e%this.cells.length).at(a%this.cells[0].length)}step(){this.cells=this.cells.map((a,e)=>a.map((s,r)=>{if(s.static)return s;let i={state:s.state};if(s.state>0)return i.state=s.state-1,i;for(let p of[-1,1])if(this.getCellWrapping(r+p,e).state==this.palette.length-1)return i.state=this.palette.length-1,i;for(let p of[-1,1])if(this.getCellWrapping(r,e+p).state==this.palette.length-1)return i.state=this.palette.length-1,i;return Math.trunc(Math.random()*1e4)==69&&(i.state=this.palette.length-1),i}))}render(){let a=new Uint8ClampedArray(4*this.width*this.height);this.cells.flatMap((e,s)=>e.flatMap((r,i)=>this.palette[r.state])).forEach((e,s)=>{a[s*4]=e.r,a[s*4+1]=e.g,a[s*4+2]=e.b,a[s*4+3]=e.a}),this.ctx.putImageData(new ImageData(a,this.width,this.height),0,0)}}const n=[["#030516","#2A4347","#218278","#18C0A9","#0FFFDB"],["#05252A","#431F32","#821A3A","#c01442","#FF0F4B"],["#4F1A4D","#432360","#372C73","#2B3686","#1F3F99","#1449AC"],["#000009","#4B00FF","#09DFFF","#4BFF09","#DFFB00","#FFB409","#FF0F4B"]];let l=0,o=new t(n[l],document.getElementById("excite-canvas"));document.getElementById("excite-canvas").onclick=()=>{l+=1,l%=n.length,o.setPalette(n[l])},setInterval(()=>{o.step(),o.render()},1e3/50)}),[]}class P extends v{constructor(t){super(),x(this,t,b,I,F,{})}}export{P as component};
