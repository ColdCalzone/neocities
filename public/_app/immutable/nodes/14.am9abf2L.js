var I=Object.defineProperty;var E=(h,t,e)=>t in h?I(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var d=(h,t,e)=>(E(h,typeof t!="symbol"?t+"":t,e),e);import{s as w,n as u,o as y}from"../chunks/scheduler.BDXRdsok.js";import{S as b,i as C,e as m,c as v,g as A,f as F,l as _,d as p,s as $,n as B,h as D,a as M,b as x,o as P,j as o,k as S,p as T,t as k,m as q,q as U}from"../chunks/index.CZd9ryWx.js";function V(h){let t,e="This page requires Javascript to render. Sorry.";return{c(){t=m("canvas"),t.textContent=e,this.h()},l(i){t=v(i,"CANVAS",{id:!0,class:!0,"data-svelte-h":!0}),A(t)!=="svelte-tj4okx"&&(t.textContent=e),this.h()},h(){F(t,"id","excite-canvas"),F(t,"class","svelte-1xcmdn5")},m(i,l){_(i,t,l)},p:u,i:u,o:u,d(i){i&&p(t)}}}function W(h){return y(()=>{class t{constructor(s,a){d(this,"palette");d(this,"cells");d(this,"canvas");d(this,"ctx");d(this,"width");d(this,"height");this.palette=[],this.setPalette(s),this.canvas=a,this.ctx=this.canvas.getContext("2d"),this.cells=[];for(let n=0;n<100;n++){this.cells.push([]);for(let c=0;c<100;c++){let r={state:Math.random()>.99?this.palette.length-1:0};r.static&&(r.state=0),this.cells[n].push(r)}}this.height=this.cells.length,this.width=this.cells[0].length,this.canvas.width=this.width,this.canvas.height=this.height,this.render()}setPalette(s){this.palette=[];for(let a of s){let n={r:parseInt(a.substring(1,3),16),g:parseInt(a.substring(3,5),16),b:parseInt(a.substring(5,7),16),a:255};this.palette.push(n)}}getCellWrapping(s,a){if(this.cells)return this.cells.at(a%this.cells.length).at(s%this.cells[0].length)}step(){this.cells=this.cells.map((s,a)=>s.map((n,c)=>{if(n.static)return n;let r={state:n.state};if(n.state>0)return r.state=n.state-1,r;for(let f of[-1,1])if(this.getCellWrapping(c+f,a).state==this.palette.length-1)return r.state=this.palette.length-1,r;for(let f of[-1,1])if(this.getCellWrapping(c,a+f).state==this.palette.length-1)return r.state=this.palette.length-1,r;return Math.trunc(Math.random()*1e4)==69&&(r.state=this.palette.length-1),r}))}render(){let s=new Uint8ClampedArray(4*this.width*this.height);this.cells.flatMap((a,n)=>a.flatMap((c,r)=>this.palette[c.state])).forEach((a,n)=>{s[n*4]=a.r,s[n*4+1]=a.g,s[n*4+2]=a.b,s[n*4+3]=a.a}),this.ctx.putImageData(new ImageData(s,this.width,this.height),0,0)}}const e=[["#030516","#2A4347","#218278","#18C0A9","#0FFFDB"],["#05252A","#431F32","#821A3A","#c01442","#FF0F4B"],["#4F1A4D","#432360","#372C73","#2B3686","#1F3F99","#1449AC"],["#000009","#4B00FF","#09DFFF","#4BFF09","#DFFB00","#FFB409","#FF0F4B"]];let i=parseInt(new URL(window.location.href).searchParams.get("palette"))%e.length||0,l=new t(e[i],document.getElementById("excite-canvas"));document.getElementById("excite-canvas").onclick=()=>{i+=1,i%=e.length,l.setPalette(e[i])},setInterval(()=>{l.step(),l.render()},1e3/24)}),[]}class j extends b{constructor(t){super(),C(this,t,W,V,w,{})}}function L(h){let t,e,i,l,g;return l=new j({}),{c(){t=$(),e=m("div"),i=m("div"),B(l.$$.fragment),this.h()},l(s){D("svelte-b8dbbl",document.head).forEach(p),t=M(s),e=v(s,"DIV",{style:!0});var n=x(e);i=v(n,"DIV",{style:!0});var c=x(i);P(l.$$.fragment,c),c.forEach(p),n.forEach(p),this.h()},h(){document.title="EXCITED_MEDIUM",o(i,"width","100%"),o(i,"border","2px solid white"),o(e,"width","25%"),o(e,"height","100%"),o(e,"padding","18px"),o(e,"padding-top","30px"),o(e,"border","2px solid white"),o(e,"border-radius","10px")},m(s,a){_(s,t,a),_(s,e,a),S(e,i),T(l,i,null),g=!0},p:u,i(s){g||(k(l.$$.fragment,s),g=!0)},o(s){q(l.$$.fragment,s),g=!1},d(s){s&&(p(t),p(e)),U(l)}}}class N extends b{constructor(t){super(),C(this,t,null,L,w,{})}}export{N as component};
