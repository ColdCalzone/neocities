var u=Object.defineProperty;var d=(r,t,n)=>t in r?u(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var c=(r,t,n)=>(d(r,typeof t!="symbol"?t+"":t,n),n);import{s as m,n as p,o as v}from"../chunks/scheduler.BDXRdsok.js";import{S as x,i as C,e as w,c as _,p as I,f,j as b,d as A}from"../chunks/index.D0yXBZN2.js";function M(r){let t,n="This page requires Javascript to render. Sorry.";return{c(){t=w("canvas"),t.textContent=n,this.h()},l(l){t=_(l,"CANVAS",{id:!0,class:!0,"data-svelte-h":!0}),I(t)!=="svelte-tj4okx"&&(t.textContent=n),this.h()},h(){f(t,"id","excite-canvas"),f(t,"class","svelte-10nm693")},m(l,g){b(l,t,g)},p,i:p,o:p,d(l){l&&A(t)}}}function y(r){return v(()=>{class t{constructor(i,s){c(this,"palette");c(this,"cells");c(this,"canvas");c(this,"ctx");c(this,"width");c(this,"height");this.palette=[];for(let e of i){let h={r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16),a:255};this.palette.push(h)}this.canvas=s,this.ctx=this.canvas.getContext("2d"),this.cells=[];for(let e=0;e<200;e++){this.cells.push([]);for(let h=0;h<200;h++){let a={state:Math.random()>.99?this.palette.length-1:0};a.static&&(a.state=0),this.cells[e].push(a)}}this.height=this.cells.length,this.width=this.cells[0].length,this.canvas.width=this.width,this.canvas.height=this.height,this.render()}getCellWrapping(i,s){if(this.cells)return this.cells.at(s%this.cells.length).at(i%this.cells[0].length)}step(){this.cells=this.cells.map((i,s)=>i.map((e,h)=>{if(e.static)return e;let a={state:e.state};if(e.state>0&&(a.state=e.state-1,e.state>2))return a;for(let o of[-1,1])if(this.getCellWrapping(h+o,s).state==this.palette.length-1)return a.state=this.palette.length-1,a;for(let o of[-1,1])if(this.getCellWrapping(h,s+o).state==this.palette.length-1)return a.state=this.palette.length-1,a;return Math.trunc(Math.random()*1e4)==69&&(a.state=this.palette.length-1),a}))}render(){let i=new Uint8ClampedArray(4*this.width*this.height);this.cells.flatMap((s,e)=>s.flatMap((h,a)=>this.palette[h.state])).forEach((s,e)=>{i[e*4]=s.r,i[e*4+1]=s.g,i[e*4+2]=s.b,i[e*4+3]=s.a}),this.ctx.putImageData(new ImageData(i,this.width,this.height),0,0)}}const n=["#030516","#2A4347","#218278","#18C0A9","#0FFFDB"];let l=new t(n,document.getElementById("excite-canvas"));setInterval(()=>{l.step(),l.render()},1e3/50)}),[]}class F extends x{constructor(t){super(),C(this,t,y,M,m,{})}}export{F as component};
